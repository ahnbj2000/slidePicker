<!doctype html>
<html lang="ko">
<head>
	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, width=device-width, minimal-ui">
	<link href="https://m.calendar.naver.com/_assets/styles/common.css" rel="stylesheet" type="text/css">
</head>
<body>
	<div style="" class="layer_custom_date">
		<div class="wrap">
		    <div class="title">
		        <h1>2015년 12월 8일 화요일 </h1>
		    </div>
		    <div class="cont">
			    <div class="select_area _year">
					<div class="scrl" style="">
					    <ul>
					    </ul>
					</div>
					<div class="mark"></div>
				</div>
				<div class="select_area _month">
					<div class="scrl" style="">
					    <ul>
					        <li data-id="" data-index="0" class="rolling_list"><button tabindex="-1"></button></li>
					        
					        <li data-id="01" data-index="1" class="rolling_list"><button>01</button></li>
					        
					        <li data-id="02" data-index="2" class="rolling_list"><button>02</button></li>
					        
					        <li data-id="03" data-index="3" class="rolling_list"><button>03</button></li>
					        
					        <li data-id="04" data-index="4" class="rolling_list"><button>04</button></li>
					        
					        <li data-id="05" data-index="5" class="rolling_list"><button>05</button></li>
					        
					        <li data-id="06" data-index="6" class="rolling_list"><button>06</button></li>
					        
					        <li data-id="07" data-index="7" class="rolling_list"><button>07</button></li>
					        
					        <li data-id="08" data-index="8" class="rolling_list"><button>08</button></li>
					        
					        <li data-id="09" data-index="9" class="rolling_list"><button>09</button></li>
					        
					        <li data-id="10" data-index="10" class="rolling_list"><button>10</button></li>
					        
					        <li data-id="11" data-index="11" class="rolling_list"><button>11</button></li>
					        
					        <li data-id="12" data-index="12" class="rolling_list"><button>12</button></li>
					        
					        <li data-id="" data-index="13" class="rolling_list"><button tabindex="-1"></button></li>

					    </ul>
					</div>
					<div class="mark"></div>
				</div>
				<div class="select_area _day">
					<div class="scrl" style="">
					    <ul>
					    </ul>
					</div>
					<div class="mark"></div>
				</div>
			</div>
			<div class="footer">
			    <button class="_cancel">취소</button>
			    <button class="_confirm">확인</button>
			</div>
		</div>
	</div>

<script src="http://code.jquery.com/jquery-1.11.3.min.js" type="text/javascript"></script>
<script src="http://momentjs.com/downloads/moment.min.js" type="text/javascript"></script>
<script src="jquery.slidePicker.js" type="text/javascript"></script>
<script>
	$(window).on('pageshow', function(event) {
		var dayOfWeekByKo = ['일', '월', '화', '수', '목', '금', '토'];
		var template = '<li data-id="{{DATE}}" class="{{CLASS}}"><button>{{DATE}}</button></li>';
		var blankList = template.replace(/{{DATE}}/g, '').replace(/{{CLASS}}/, 'rolling_list');
		var slidePicker = $('.layer_custom_date').slidePicker({
			'selector' : {
				'view': '.select_area',
				'rolling': '.scrl',
				'list': '.rolling_list'
			},
			'effect': {
				'easing': 'easeOutExpo',
				'duration': 1,
				'delay': 0
			},
			'selectedClass': 'selected',
			'isDateTimePicker': true,
			onRender: function(dateTime) {

				var yearConEl = $('._year ul');
				var dayConEl = $('._day ul');
				var tempArr = [];
				var startYear = 1971;
				var endYear = 2050;

				tempArr.push(blankList);
				for(var i = startYear; i <= endYear; i++) {
					tempArr.push(template.replace(/{{DATE}}/g, i).replace(/{{CLASS}}/, 'rolling_list'));
				}
				tempArr.push(blankList);
				yearConEl.html(tempArr.join(''));
				tempArr = [];

				tempArr.push(blankList);
				for(var i = 1; i <= 31; i++) {
					tempArr.push(template.replace(/{{DATE}}/g, i).replace(/{{CLASS}}/, 'rolling_list'));
				}
				tempArr.push(blankList);
				dayConEl.html(tempArr.join(''));

			},
			onChange: function(element, data) {
				// console.log(element, data.values);
				var el = $(element);
				var daysInMonth = this.dateTime.getDaysInMonth(data.values[0] + '-' + data.values[1]);
				var tempArr = [];

				tempArr.push(blankList);
				for(var i = 1; i <= daysInMonth; i++) {
					tempArr.push(template.replace(/{{DATE}}/g, i).replace(/{{CLASS}}/, 'rolling_list'));
				}
				tempArr.push(blankList);
				el.siblings('._day').find('ul').html(tempArr.join(''));
				this.repaint(2);

				var date = data.values.join('-');
				var dayOfWeek = this.dateTime.getDayOfWeek(date, dayOfWeekByKo);
				$('.title h1').text(data.values[0] + '년 ' + data.values[1] + '월 ' + data.values[2] + '일 ' + dayOfWeek + '요일');
				// var daysInMonth = this.dateTime.getDaysInMonth();

			},
			onClose: function() {

			}
		});
	
		// test, input 클릭 시 해당 날짜가 2011년 이라면.
		slidePicker.pick(['2011', '06']);
	});
</script>
</body>
</html>